<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>loading</title>
        <link type="text/css" rel="stylesheet" href="about/1.css">
    </head>
    <body>
        <div id="big-box">
            <div id="one-outter"><!-- 跳的进度盒子-->
                <div id="inner"></div>
            </div>
            <div id="two"></div> <!-- 直线进度条-->
            <div id="loadtext">0%</div>
            <div id="cover">加载完成</div>
        </div>

        <script>

            //进度条和计时器
            var i=0;
            function test(){
                i++;
                document.getElementById("loadtext").innerText = i + "%";
                if(i<100) setTimeout("test()",100);
            }
            //触发
            if(confirm("your boss sent you a bomb")){
                document.getElementById("one-outter").style.animationPlayState = "running";
                document.getElementById("inner").style.animationPlayState = "running";
                document.getElementById("inner").style.display = "block";
                document.getElementById("two").style.animationPlayState = "running";
                setTimeout("test()",100);
            }
            //进度条判断动画是否停止并将覆盖层跳出
            var e = document.getElementById("two");
                e.addEventListener("animationend", function() {
                    document.getElementById("cover").style.display = "block";
                    document.getElementById("inner").style.display = "none";
                    alert("BOOM");
                });
                
            </script>

    </body>
</html>